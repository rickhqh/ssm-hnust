{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, withKeys as _withKeys, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"title\"\n}, \"若依后台管理系统\", -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  class: \"login-code\"\n};\nconst _hoisted_4 = [\"src\"];\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"记住密码\");\n\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 0,\n  style: {\n    \"float\": \"right\"\n  }\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"立即注册\");\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-login-footer\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Copyright © 2018-2022 ruoyi.vip All Rights Reserved.\")], -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_svg_icon = _resolveComponent(\"svg-icon\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_form, {\n    ref: \"loginForm\",\n    model: $data.loginForm,\n    rules: $data.loginRules,\n    class: \"login-form\"\n  }, {\n    default: _withCtx(() => [_hoisted_2, _createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        type: \"text\",\n        \"auto-complete\": \"off\",\n        placeholder: \"账号\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"user\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        type: \"password\",\n        \"auto-complete\": \"off\",\n        placeholder: \"密码\",\n        onKeyup: _withKeys($options.handleLogin, [\"enter\", \"native\"])\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"password\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\", \"onKeyup\"])]),\n      _: 1\n      /* STABLE */\n\n    }), $data.captchaOnOff ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      prop: \"code\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.code,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.loginForm.code = $event),\n        \"auto-complete\": \"off\",\n        placeholder: \"验证码\",\n        style: {\n          \"width\": \"63%\"\n        },\n        onKeyup: _withKeys($options.handleLogin, [\"enter\", \"native\"])\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"validCode\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\", \"onKeyup\"]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n        src: $data.codeUrl,\n        onClick: _cache[3] || (_cache[3] = (...args) => $options.getCode && $options.getCode(...args)),\n        class: \"login-code-img\"\n      }, null, 8\n      /* PROPS */\n      , _hoisted_4)])]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_checkbox, {\n      modelValue: $data.loginForm.rememberMe,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.loginForm.rememberMe = $event),\n      style: {\n        \"margin\": \"0px 0px 25px 0px\"\n      }\n    }, {\n      default: _withCtx(() => [_hoisted_5]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createVNode(_component_el_form_item, {\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        loading: $data.loading,\n        size: \"medium\",\n        type: \"primary\",\n        style: {\n          \"width\": \"100%\"\n        },\n        onClick: _withModifiers($options.handleLogin, [\"prevent\"])\n      }, {\n        default: _withCtx(() => [!$data.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"登 录\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_7, \"登 录 中...\"))]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"loading\", \"onClick\"]), $data.register ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(_component_router_link, {\n        class: \"link-type\",\n        to: '/register'\n      }, {\n        default: _withCtx(() => [_hoisted_9]),\n        _: 1\n        /* STABLE */\n\n      })])) : _createCommentVNode(\"v-if\", true)]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"]), _createCommentVNode(\"  底部  \"), _hoisted_10]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_el_form","ref","model","$data","rules","_hoisted_2","_component_el_form_item","prop","_component_el_input","username","$event","type","placeholder","_component_svg_icon","slot","password","onKeyup","$options","_createBlock","code","src","onClick","_component_el_checkbox","rememberMe","_component_el_button","loading","size","_hoisted_6","_hoisted_7","_component_router_link","to","_createCommentVNode","_hoisted_10"],"sourceRoot":"","sources":["C:\\Users\\贺启衡\\Desktop\\hqh\\ssm\\hqh-ui\\src\\components\\login\\index.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" class=\"login-form\">\r\n      <h3 class=\"title\">若依后台管理系统</h3>\r\n      <el-form-item prop=\"username\">\r\n        <el-input\r\n          v-model=\"loginForm.username\"\r\n          type=\"text\"\r\n          auto-complete=\"off\"\r\n          placeholder=\"账号\"\r\n        >\r\n          <svg-icon slot=\"prefix\" icon-class=\"user\" class=\"el-input__icon input-icon\" />\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"password\">\r\n        <el-input\r\n          v-model=\"loginForm.password\"\r\n          type=\"password\"\r\n          auto-complete=\"off\"\r\n          placeholder=\"密码\"\r\n          @keyup.enter.native=\"handleLogin\"\r\n        >\r\n          <svg-icon slot=\"prefix\" icon-class=\"password\" class=\"el-input__icon input-icon\" />\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"code\" v-if=\"captchaOnOff\">\r\n        <el-input\r\n          v-model=\"loginForm.code\"\r\n          auto-complete=\"off\"\r\n          placeholder=\"验证码\"\r\n          style=\"width: 63%\"\r\n          @keyup.enter.native=\"handleLogin\"\r\n        >\r\n          <svg-icon slot=\"prefix\" icon-class=\"validCode\" class=\"el-input__icon input-icon\" />\r\n        </el-input>\r\n        <div class=\"login-code\">\r\n          <img :src=\"codeUrl\" @click=\"getCode\" class=\"login-code-img\"/>\r\n        </div>\r\n      </el-form-item>\r\n      <el-checkbox v-model=\"loginForm.rememberMe\" style=\"margin:0px 0px 25px 0px;\">记住密码</el-checkbox>\r\n      <el-form-item style=\"width:100%;\">\r\n        <el-button\r\n          :loading=\"loading\"\r\n          size=\"medium\"\r\n          type=\"primary\"\r\n          style=\"width:100%;\"\r\n          @click.native.prevent=\"handleLogin\"\r\n        >\r\n          <span v-if=\"!loading\">登 录</span>\r\n          <span v-else>登 录 中...</span>\r\n        </el-button>\r\n        <div style=\"float: right;\" v-if=\"register\">\r\n          <router-link class=\"link-type\" :to=\"'/register'\">立即注册</router-link>\r\n        </div>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--  底部  -->\r\n    <div class=\"el-login-footer\">\r\n      <span>Copyright © 2018-2022 ruoyi.vip All Rights Reserved.</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCodeImg } from \"@/api/login\";\r\nimport Cookies from \"js-cookie\";\r\nimport { encrypt, decrypt } from '@/utils/jsencrypt'\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      codeUrl: \"\",\r\n      loginForm: {\r\n        username: \"admin\",\r\n        password: \"admin123\",\r\n        rememberMe: false,\r\n        code: \"\",\r\n        uuid: \"\"\r\n      },\r\n      loginRules: {\r\n        username: [\r\n          { required: true, trigger: \"blur\", message: \"请输入您的账号\" }\r\n        ],\r\n        password: [\r\n          { required: true, trigger: \"blur\", message: \"请输入您的密码\" }\r\n        ],\r\n        code: [{ required: true, trigger: \"change\", message: \"请输入验证码\" }]\r\n      },\r\n      loading: false,\r\n      // 验证码开关\r\n      captchaOnOff: true,\r\n      // 注册开关\r\n      register: false,\r\n      redirect: undefined\r\n    };\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler: function(route) {\r\n        this.redirect = route.query && route.query.redirect;\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getCode();\r\n    this.getCookie();\r\n  },\r\n  methods: {\r\n    getCode() {\r\n      getCodeImg().then(res => {\r\n        this.captchaOnOff = res.captchaOnOff === undefined ? true : res.captchaOnOff;\r\n        if (this.captchaOnOff) {\r\n          this.codeUrl = \"data:image/gif;base64,\" + res.img;\r\n          this.loginForm.uuid = res.uuid;\r\n        }\r\n      });\r\n    },\r\n    getCookie() {\r\n      const username = Cookies.get(\"username\");\r\n      const password = Cookies.get(\"password\");\r\n      const rememberMe = Cookies.get('rememberMe')\r\n      this.loginForm = {\r\n        username: username === undefined ? this.loginForm.username : username,\r\n        password: password === undefined ? this.loginForm.password : decrypt(password),\r\n        rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)\r\n      };\r\n    },\r\n    handleLogin() {\r\n      this.$refs.loginForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          if (this.loginForm.rememberMe) {\r\n            Cookies.set(\"username\", this.loginForm.username, { expires: 30 });\r\n            Cookies.set(\"password\", encrypt(this.loginForm.password), { expires: 30 });\r\n            Cookies.set('rememberMe', this.loginForm.rememberMe, { expires: 30 });\r\n          } else {\r\n            Cookies.remove(\"username\");\r\n            Cookies.remove(\"password\");\r\n            Cookies.remove('rememberMe');\r\n          }\r\n          this.$store.dispatch(\"Login\", this.loginForm).then(() => {\r\n            this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\r\n          }).catch(() => {\r\n            this.loading = false;\r\n            if (this.captchaOnOff) {\r\n              this.getCode();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n.login {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  background-image: url(\"../assets/images/login-background.jpg\");\r\n  background-size: cover;\r\n}\r\n.title {\r\n  margin: 0px auto 30px auto;\r\n  text-align: center;\r\n  color: #707070;\r\n}\r\n\r\n.login-form {\r\n  border-radius: 6px;\r\n  background: #ffffff;\r\n  width: 400px;\r\n  padding: 25px 25px 5px 25px;\r\n  .el-input {\r\n    height: 38px;\r\n    input {\r\n      height: 38px;\r\n    }\r\n  }\r\n  .input-icon {\r\n    height: 39px;\r\n    width: 14px;\r\n    margin-left: 2px;\r\n  }\r\n}\r\n.login-tip {\r\n  font-size: 13px;\r\n  text-align: center;\r\n  color: #bfbfbf;\r\n}\r\n.login-code {\r\n  width: 33%;\r\n  height: 38px;\r\n  float: right;\r\n  img {\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n  }\r\n}\r\n.el-login-footer {\r\n  height: 40px;\r\n  line-height: 40px;\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-family: Arial;\r\n  font-size: 12px;\r\n  letter-spacing: 1px;\r\n}\r\n.login-code-img {\r\n  height: 38px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}