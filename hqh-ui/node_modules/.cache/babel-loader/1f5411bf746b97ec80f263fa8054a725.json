{"ast":null,"code":"import { ref } from \"vue\";\nimport { listUser, addUser, getByUserId, updateUser, deleteUser } from \"@/api/user.js\";\nimport { onMounted } from \"vue\";\nimport { ElMessageBox, ElMessage } from \"element-plus\";\nimport { ElNotification } from \"element-plus\";\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const queryParem = ref({\n      userId: '',\n      size: 4,\n      page: 0,\n      userName: \"\",\n      nickName: \"\",\n      sclass: \"\",\n      phonenumber: \"\",\n      professional: \"\",\n      email: \"\",\n      delFlag: \"0\"\n    });\n    const userForm = ref({\n      size: 3,\n      page: 0,\n      userName: \"\",\n      nickName: \"\",\n      sclass: \"\",\n      phonenumber: \"\",\n      professional: \"\",\n      email: \"\",\n      delFlag: \"0\"\n    });\n    const tableData = ref([]);\n    const total = ref(0);\n    let dialogVisible = ref(false);\n\n    const getList = function () {\n      listUser(queryParem.value).then(res => {\n        tableData.value = res.data.content;\n        total.value = res.data.totalElements;\n        queryParem.value.size = res.data.size;\n      });\n    };\n\n    onMounted(() => {\n      getList();\n    });\n\n    const changePage = async function (current) {\n      queryParem.value.page = current - 1;\n      getList();\n    };\n\n    const submitForm = function () {\n      getList();\n    };\n\n    const resetForm = function () {\n      tableData.value = [];\n      total.value = 0;\n      queryParem.value.size = 3;\n      queryParem.value.userName = \"\";\n      queryParem.value.nickName = \"\";\n      queryParem.value.sclass = \"\";\n      queryParem.value.phonenumber = \"\";\n      queryParem.value.professional = \"\";\n      queryParem.value.email = \"\";\n      getList();\n    };\n\n    const addForm = function () {\n      console.log(queryParem.value.userName);\n\n      if (queryParem.value.userName == \"\" || queryParem.value.nickName === null || queryParem.value.sclass === null || queryParem.value.professional === null) {\n        ElNotification({\n          title: \"错误\",\n          message: \"请输入学生信息!\",\n          type: \"Error\"\n        }); // ElMessage.error('Oops, this is a error message.')\n      } else {\n        queryParem.value.delFlag = \"0\";\n        addUser(queryParem.value).then(res => {\n          console.log(res);\n        });\n        resetForm();\n      }\n    };\n\n    const handleEdit = function (index, row) {\n      console.log(index);\n      console.log(\"------\");\n      console.log(row);\n      getByUserId(row.userId).then(res => {\n        userForm.value = res.data;\n        dialogVisible.value = true;\n      });\n    };\n\n    const submitFrom = function () {\n      updateUser(userForm.value).then(res => {\n        if (res.status === 200) {\n          dialogVisible.value = false;\n        } // 更新列表\n\n\n        getList();\n      });\n    };\n\n    const handleDelete = function (index, row) {\n      getByUserId(row.userId).then(res => {\n        userForm.value = res.data;\n      });\n      ElMessageBox.confirm('您确定要删除此条信息吗？', 'Warning', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        userForm.value.delFlag = \"2\";\n        updateUser(userForm.value).then(res => {\n          if (res.status === 200) {\n            // 更新列表\n            getList(); // ElMessage({\n            //   type: \"info\",\n            //   message: `删除成功!`,\n            // });\n\n            ElNotification({\n              title: \"Success\",\n              message: \"删除成功!\",\n              type: \"Success\"\n            });\n          }\n        });\n      }).catch(() => {\n        ElMessage({\n          type: 'info',\n          message: '取消删除'\n        });\n      });\n    };\n\n    const __returned__ = {\n      queryParem,\n      userForm,\n      tableData,\n      total,\n      dialogVisible,\n      getList,\n      changePage,\n      submitForm,\n      resetForm,\n      addForm,\n      handleEdit,\n      submitFrom,\n      handleDelete,\n      ref,\n      listUser,\n      addUser,\n      getByUserId,\n      updateUser,\n      deleteUser,\n      onMounted,\n      ElMessageBox,\n      ElMessage,\n      ElNotification\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ref","listUser","addUser","getByUserId","updateUser","deleteUser","onMounted","ElMessageBox","ElMessage","ElNotification","queryParem","userId","size","page","userName","nickName","sclass","phonenumber","professional","email","delFlag","userForm","tableData","total","dialogVisible","getList","value","then","res","data","content","totalElements","changePage","current","submitForm","resetForm","addForm","console","log","title","message","type","handleEdit","index","row","submitFrom","status","handleDelete","confirm","confirmButtonText","cancelButtonText","catch"],"sources":["C:/Users/贺启衡/Desktop/hqh/ssm/hqh-ui/src/components/user/index.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-header>Header</el-header>\r\n    <el-main>\r\n      <el-form\r\n        :model=\"queryParem\"\r\n        label-width=\"100px\"\r\n        class=\"demo-ruleForm\"\r\n        size=\"mini\"\r\n        :inline=\"true\"\r\n      >\r\n        <el-row>\r\n\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"账号\">\r\n              <el-input v-model=\"queryParem.userName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"姓名\">\r\n              <el-input v-model=\"queryParem.nickName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"电话号码\">\r\n              <el-input v-model=\"queryParem.phonenumber\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"专业\">\r\n              <el-input v-model=\"queryParem.professional\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"班级\">\r\n              <el-input v-model=\"queryParem.sclass\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col span=\"8\">\r\n            <el-form-item label=\"邮箱\">\r\n              <el-input v-model=\"queryParem.email\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\">\r\n            <el-button\r\n              type=\"danger\"\r\n              @click=\"addForm\"\r\n              icon=\"el-icon-search\"\r\n              plain\r\n              >添加\r\n            </el-button>\r\n            <el-button type=\"primary\" @click=\"submitForm\" icon=\"el-icon-search\"\r\n              >查询</el-button\r\n            >\r\n            <el-button\r\n              type=\"warning\"\r\n              @click=\"resetForm\"\r\n              icon=\"el-icon-search\"\r\n              plain\r\n              >重置</el-button\r\n            >\r\n        </el-row>\r\n      </el-form>\r\n      <el-divider />\r\n      <el-table\r\n        ref=\"tableRef\"\r\n        row-key=\"username\"\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\"\r\n      >\r\n      <el-table-column prop=\"userId\" label=\"id\"  width=\"100\"/>\r\n        <el-table-column prop=\"userName\" label=\"账号\" />\r\n        <el-table-column prop=\"nickName\" label=\"姓名\" />\r\n        <el-table-column prop=\"professional\" label=\"专业\" width=\"100\"/>\r\n        <el-table-column prop=\"sclass\" label=\"班级\" width=\"100\"/>\r\n        <el-table-column prop=\"email\" label=\"邮箱\" />\r\n        <el-table-column prop=\"phonenumber\" label=\"电话号码\" />\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              size=\"small\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog v-model=\"dialogVisible\" title=\"修改用户\" width=\"30%\">\r\n        <el-form ref=\"userFormRef\" :model=\"userForm\" label-width=\"120px\">\r\n          <el-form-item label=\"账号\">\r\n            <el-input v-model=\"userForm.userName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"姓名\">\r\n            <el-input v-model=\"userForm.nickName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"专业\">\r\n            <el-input v-model=\"userForm.professional\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"班级\">\r\n            <el-input v-model=\"userForm.sclass\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\">\r\n            <el-input v-model=\"userForm.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"电话号码\">\r\n            <el-input v-model=\"userForm.phonenumber\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitFrom\">提交</el-button>\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n    </el-main>\r\n\r\n    <h1>这是{{ currentPage }}</h1>\r\n    <el-footer>\r\n      <el-pagination\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total\"\r\n        :page-size=\"queryParem.size\"\r\n        @current-change=\"changePage\"\r\n      />\r\n    </el-footer>\r\n  </el-container>\r\n</template>\r\n\r\n<script  setup>\r\nimport { ref } from \"vue\";\r\nimport {\r\n  listUser,\r\n  addUser,\r\n  getByUserId,\r\n  updateUser,\r\n  deleteUser,\r\n} from \"@/api/user.js\";\r\nimport { onMounted } from \"vue\";\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport { ElNotification } from \"element-plus\";\r\n\r\nconst queryParem = ref({\r\n  userId:'',\r\n  size: 4,\r\n  page: 0,\r\n  userName: \"\",\r\n  nickName: \"\",\r\n  sclass: \"\",\r\n  phonenumber: \"\",\r\n  professional: \"\",\r\n  email: \"\",\r\n  delFlag: \"0\",\r\n});\r\n\r\nconst userForm = ref({\r\n  size: 3,\r\n  page: 0,\r\n  userName: \"\",\r\n  nickName: \"\",\r\n  sclass: \"\",\r\n  phonenumber: \"\",\r\n  professional: \"\",\r\n  email: \"\",\r\n  delFlag: \"0\",\r\n});\r\n\r\nconst tableData = ref([]);\r\nconst total = ref(0);\r\nlet dialogVisible = ref(false);\r\nconst getList = function () {\r\n  listUser(queryParem.value).then((res) => {\r\n    tableData.value = res.data.content;\r\n    total.value = res.data.totalElements;\r\n    queryParem.value.size = res.data.size;\r\n  });\r\n};\r\nonMounted(() => {\r\n  getList();\r\n});\r\nconst changePage = async function (current) {\r\n  queryParem.value.page = current - 1;\r\n  getList();\r\n};\r\n\r\nconst submitForm = function () {\r\n  getList();\r\n};\r\n\r\nconst resetForm = function () {\r\n  tableData.value = [];\r\n  total.value = 0;\r\n  queryParem.value.size = 3;\r\n  queryParem.value.userName = \"\";\r\n  queryParem.value.nickName = \"\";\r\n  queryParem.value.sclass = \"\";\r\n  queryParem.value.phonenumber = \"\";\r\n  queryParem.value.professional = \"\";\r\n  queryParem.value.email = \"\";\r\n  getList();\r\n};\r\nconst addForm = function () {\r\n  console.log(queryParem.value.userName);\r\n  if (\r\n    queryParem.value.userName == \"\" ||\r\n    queryParem.value.nickName === null ||\r\n    queryParem.value.sclass === null ||\r\n    queryParem.value.professional === null\r\n  ) {\r\n    ElNotification({\r\n      title: \"错误\",\r\n      message: \"请输入学生信息!\",\r\n      type: \"Error\",\r\n    });\r\n    // ElMessage.error('Oops, this is a error message.')\r\n  } else {\r\n    queryParem.value.delFlag = \"0\";\r\n    addUser(queryParem.value).then((res) => {\r\n      console.log(res);\r\n    });\r\n    resetForm();\r\n  }\r\n};\r\n\r\nconst handleEdit = function (index, row) {\r\n  console.log(index);\r\n  console.log(\"------\");\r\n  console.log(row);\r\n  getByUserId(row.userId).then((res) => {\r\n    userForm.value = res.data;\r\n    dialogVisible.value = true;\r\n  });\r\n};\r\nconst submitFrom = function () {\r\n  updateUser(userForm.value).then((res) => {\r\n    if (res.status === 200) {\r\n      dialogVisible.value = false;\r\n    }\r\n    // 更新列表\r\n    getList();\r\n  });\r\n};\r\nconst handleDelete = function (index, row) {\r\n  getByUserId(row.userId).then((res) => {\r\n    userForm.value = res.data;\r\n  });\r\n   ElMessageBox.confirm(\r\n    '您确定要删除此条信息吗？',\r\n    'Warning',\r\n    {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning',\r\n    }\r\n  )\r\n    .then(() => {\r\n      userForm.value.delFlag = \"2\";\r\n      updateUser(userForm.value).then((res) => {\r\n        if (res.status === 200) {\r\n          // 更新列表\r\n          getList();\r\n\r\n          // ElMessage({\r\n          //   type: \"info\",\r\n          //   message: `删除成功!`,\r\n          // });\r\n          ElNotification({\r\n            title: \"Success\",\r\n            message: \"删除成功!\",\r\n            type: \"Success\",\r\n          });\r\n        }\r\n      })\r\n    })\r\n    .catch(() => {\r\n      ElMessage({\r\n        type: 'info',\r\n        message: '取消删除',\r\n      })\r\n    })\r\n  \r\n};\r\n\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}